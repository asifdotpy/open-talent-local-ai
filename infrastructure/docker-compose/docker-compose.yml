version: '3.8'

# OpenTalent Platform - Local Infrastructure
# Open Source | Self-Hosted | Desktop & Web Ready

services:
  #===========================================================================
  # DATABASE SERVICES
  #===========================================================================

  postgres:
    image: postgres:15-alpine
    container_name: OpenTalent-postgres
    restart: unless-stopped
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-OpenTalent}
      POSTGRES_USER: ${POSTGRES_USER:-OpenTalent}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_MAX_CONNECTIONS: ${POSTGRES_MAX_CONNECTIONS:-100}
      PGDATA: /var/lib/postgresql/data/pgdata
    ports:
      - "${POSTGRES_PORT:-5432}:5432"
    volumes:
      - postgres-data:/var/lib/postgresql/data
      - ./init-scripts/postgres:/docker-entrypoint-initdb.d:ro
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-OpenTalent}"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${POSTGRES_CPU_LIMIT:-2.0}"
          memory: ${POSTGRES_MEMORY_LIMIT:-2g}

  redis:
    image: redis:7-alpine
    container_name: OpenTalent-redis
    restart: unless-stopped
    command: >
      redis-server
      --requirepass ${REDIS_PASSWORD}
      --maxmemory 512mb
      --maxmemory-policy allkeys-lru
      --save 60 1000
      --appendonly yes
    ports:
      - "${REDIS_PORT:-6379}:6379"
    volumes:
      - redis-data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "--raw", "incr", "ping"]
      interval: 10s
      timeout: 3s
      retries: 5
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${REDIS_CPU_LIMIT:-0.5}"
          memory: ${REDIS_MEMORY_LIMIT:-512m}

  minio:
    image: minio/minio:latest
    container_name: OpenTalent-minio
    restart: unless-stopped
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: ${MINIO_ROOT_USER:-minioadmin}
      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}
    ports:
      - "${MINIO_ENDPOINT_EXTERNAL:-9000}:9000"  # S3 API
      - "${MINIO_CONSOLE_PORT:-9001}:9001"       # Web Console
    volumes:
      - minio-data:/data
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${MINIO_CPU_LIMIT:-1.0}"
          memory: ${MINIO_MEMORY_LIMIT:-1g}

  #===========================================================================
  # AI/ML SERVICES
  #===========================================================================

  ollama:
    image: ollama/ollama:latest
    container_name: OpenTalent-ollama
    restart: unless-stopped
    ports:
      - "${OLLAMA_PORT:-11434}:11434"
    volumes:
      - ollama-models:/root/.ollama
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:11434/api/tags"]
      interval: 30s
      timeout: 10s
      retries: 5
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${OLLAMA_CPU_LIMIT:-4.0}"
          memory: ${OLLAMA_MEMORY_LIMIT:-8g}
    # Uncomment for GPU support (requires nvidia-docker)
    # runtime: nvidia
    # environment:
    #   - NVIDIA_VISIBLE_DEVICES=all
    #   - NVIDIA_DRIVER_CAPABILITIES=compute,utility

  genkit-service:
    build:
      context: ../../agents/genkit-service
      dockerfile: Dockerfile
    image: OpenTalent/genkit-service:latest
    container_name: OpenTalent-genkit-service
    restart: unless-stopped
    environment:
      - GOOGLE_GENAI_API_KEY=${GOOGLE_GENAI_API_KEY}
      - REDIS_URL=${REDIS_URL}
      - NODE_ENV=production
      - PORT=3400
    ports:
      - "${GENKIT_SERVICE_PORT:-3400}:3400"
    depends_on:
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3400/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "1.0"
          memory: 512m

  ai-orchestra:
    build:
      context: ../../ai-orchestra-simulation
      dockerfile: Dockerfile
      target: production
    image: OpenTalent/ai-orchestra:latest
    container_name: Openopen-talent-orchestra
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=3001
      - REDIS_URL=${REDIS_URL}
    ports:
      - "${AI_ORCHESTRA_PORT:-3001}:3001"
    volumes:
      - ai-orchestra-assets:/app/assets
    depends_on:
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "2.0"
          memory: 2g

  #===========================================================================
  # MICROSERVICES
  #===========================================================================

  avatar-service:
    build:
      context: ../../microservices/avatar-service
      dockerfile: Dockerfile
    image: OpenTalent/avatar-service:latest
    container_name: OpenTalent-avatar-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - MINIO_ENDPOINT=${MINIO_ENDPOINT}
      - MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY}
      - MINIO_SECRET_KEY=${MINIO_SECRET_KEY}
      - MINIO_BUCKET=${MINIO_BUCKET:-open-talent-videos}
      - RENDERING_MODE=${AVATAR_RENDERING_MODE:-hybrid}
      - WEBGL_RENDERER=${WEBGL_RENDERER:-cpu}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${AVATAR_SERVICE_PORT:-8001}:80"
    volumes:
      - avatar-cache:/var/cache/avatars
      - ${AVATAR_MODELS_PATH:-./models}:/app/models:ro
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
      minio:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  voice-service:
    build:
      context: ../../microservices/voice-service
      dockerfile: Dockerfile
      target: production
    image: OpenTalent/voice-service:latest
    container_name: OpenTalent-voice-service
    restart: unless-stopped
    environment:
      - VOICE_ENGINE=${VOICE_ENGINE:-piper}
      - PIPER_VOICE=${PIPER_VOICE:-en_US-amy-medium}
      - STT_ENGINE=${STT_ENGINE:-whisper}
      - WHISPER_MODEL=${WHISPER_MODEL:-base}
      - WHISPER_DEVICE=${WHISPER_DEVICE:-cpu}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=8000
    ports:
      - "${VOICE_SERVICE_PORT:-8002}:8000"
    volumes:
      - piper-models:/app/piper
      - whisper-models:/app/whisper-models
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  conversation-service:
    build:
      context: ../../microservices/conversation-service
      dockerfile: Dockerfile
    image: OpenTalent/conversation-service:latest
    container_name: OpenTalent-conversation-service
    restart: unless-stopped
    environment:
      - OLLAMA_URL=${OLLAMA_URL}
      - OLLAMA_MODEL=${OLLAMA_MODEL:-llama3.1:8b}
      - OLLAMA_TEMPERATURE=${OLLAMA_TEMPERATURE:-0.7}
      - REDIS_URL=${REDIS_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${CONVERSATION_SERVICE_PORT:-8003}:80"
    depends_on:
      ollama:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  interview-service:
    build:
      context: ../../microservices/interview-service
      dockerfile: Dockerfile
    image: OpenTalent/interview-service:latest
    container_name: OpenTalent-interview-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - AVATAR_SERVICE_URL=http://avatar-service:80
      - VOICE_SERVICE_URL=http://voice-service:8000
      - CONVERSATION_SERVICE_URL=http://conversation-service:80
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${INTERVIEW_SERVICE_PORT:-8004}:80"
    depends_on:
      postgres:
        condition: service_healthy
      avatar-service:
        condition: service_healthy
      voice-service:
        condition: service_healthy
      conversation-service:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  scout-service:
    build:
      context: ../../microservices/scout-service
      dockerfile: Dockerfile
    image: OpenTalent/scout-service:latest
    container_name: OpenTalent-scout-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - GITHUB_API_TOKEN=${GITHUB_API_TOKEN:-}
      - LINKEDIN_API_KEY=${LINKEDIN_API_KEY:-}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${SCOUT_SERVICE_PORT:-8005}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  analytics-service:
    build:
      context: ../../microservices/analytics-service
      dockerfile: Dockerfile
    image: OpenTalent/analytics-service:latest
    container_name: OpenTalent-analytics-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${ANALYTICS_SERVICE_PORT:-8007}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  ai-auditing-service:
    build:
      context: ../../microservices/ai-auditing-service
      dockerfile: Dockerfile
    image: OpenTalent/ai-auditing-service:latest
    container_name: Openopen-talent-auditing-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${AI_AUDITING_SERVICE_PORT:-8006}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  candidate-service:
    build:
      context: ../../microservices/candidate-service
      dockerfile: Dockerfile
    image: OpenTalent/candidate-service:latest
    container_name: OpenTalent-candidate-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${CANDIDATE_SERVICE_PORT:-8010}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  explainability-service:
    build:
      context: ../../microservices/explainability-service
      dockerfile: Dockerfile
    image: OpenTalent/explainability-service:latest
    container_name: OpenTalent-explainability-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${EXPLAINABILITY_SERVICE_PORT:-8008}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  notification-service:
    build:
      context: ../../microservices/notification-service
      dockerfile: Dockerfile
    image: OpenTalent/notification-service:latest
    container_name: OpenTalent-notification-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - SMTP_HOST=${SMTP_HOST:-}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SMTP_USER=${SMTP_USER:-}
      - SMTP_PASSWORD=${SMTP_PASSWORD:-}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${NOTIFICATION_SERVICE_PORT:-8011}:80"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  project-service:
    build:
      context: ../../microservices/project-service
      dockerfile: Dockerfile
    image: OpenTalent/project-service:latest
    container_name: OpenTalent-project-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${PROJECT_SERVICE_PORT:-8009}:80"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  security-service:
    build:
      context: ../../microservices/security-service
      dockerfile: Dockerfile
    image: OpenTalent/security-service:latest
    container_name: OpenTalent-security-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET_KEY=${JWT_SECRET_KEY}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${SECURITY_SERVICE_PORT:-8012}:80"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  user-service:
    build:
      context: ../../microservices/user-service
      dockerfile: Dockerfile
    image: OpenTalent/user-service:latest
    container_name: OpenTalent-user-service
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET_KEY=${JWT_SECRET_KEY}
      - SMTP_HOST=${SMTP_HOST:-}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SMTP_USER=${SMTP_USER:-}
      - SMTP_PASSWORD=${SMTP_PASSWORD:-}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - PORT=80
    ports:
      - "${USER_SERVICE_PORT:-8013}:80"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${SERVICE_CPU_LIMIT:-1.0}"
          memory: ${SERVICE_MEMORY_LIMIT:-1g}

  #===========================================================================
  # BACKGROUND WORKERS
  #===========================================================================

  celery-render-worker:
    build:
      context: ../../microservices/avatar-service
      dockerfile: Dockerfile
    image: OpenTalent/avatar-service:latest
    container_name: OpenTalent-celery-render-worker
    restart: unless-stopped
    command: >
      celery -A avatar_service.celery_app worker
      --loglevel=INFO
      --concurrency=${CELERY_RENDER_WORKERS:-4}
      --max-tasks-per-child=1000
      --time-limit=600
      --queues=render
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - MINIO_ENDPOINT=${MINIO_ENDPOINT}
      - MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY}
      - MINIO_SECRET_KEY=${MINIO_SECRET_KEY}
      - CELERY_BROKER_URL=${CELERY_BROKER_URL}
      - CELERY_RESULT_BACKEND=${CELERY_RESULT_BACKEND}
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
      minio:
        condition: service_healthy
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "${CELERY_WORKER_CPU_LIMIT:-2.0}"
          memory: ${CELERY_WORKER_MEMORY_LIMIT:-2g}

  celery-beat:
    build:
      context: ../../microservices/avatar-service
      dockerfile: Dockerfile
    image: OpenTalent/avatar-service:latest
    container_name: OpenTalent-celery-beat
    restart: unless-stopped
    command: celery -A avatar_service.celery_app beat --loglevel=INFO
    environment:
      - REDIS_URL=${REDIS_URL}
      - CELERY_BROKER_URL=${CELERY_BROKER_URL}
    depends_on:
      redis:
        condition: service_healthy
    networks:
      - OpenTalent-network
    deploy:
      resources:
        limits:
          cpus: "0.2"
          memory: 256m

  #===========================================================================
  # REVERSE PROXY & FRONTEND
  #===========================================================================

  nginx:
    image: nginx:alpine
    container_name: OpenTalent-nginx
    restart: unless-stopped
    ports:
      - "${NGINX_PORT:-8080}:80"
      - "443:443"  # HTTPS (if SSL enabled)
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro
      - frontend-build:/usr/share/nginx/html:ro
    depends_on:
      - avatar-service
      - voice-service
      - conversation-service
      - interview-service
      - scout-service
      - analytics-service
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - OpenTalent-network

  # Optional: Frontend build (uncomment if bundling frontend)
  # frontend:
  #   build:
  #     context: ../../frontend/dashboard
  #     dockerfile: Dockerfile
  #   image: OpenTalent/frontend:latest
  #   container_name: OpenTalent-frontend
  #   volumes:
  #     - frontend-build:/app/dist

  #===========================================================================
  # MONITORING (Optional)
  #===========================================================================

  # prometheus:
  #   image: prom/prometheus:latest
  #   container_name: OpenTalent-prometheus
  #   restart: unless-stopped
  #   ports:
  #     - "${PROMETHEUS_PORT:-9090}:9090"
  #   volumes:
  #     - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml:ro
  #     - prometheus-data:/prometheus
  #   command:
  #     - '--config.file=/etc/prometheus/prometheus.yml'
  #     - '--storage.tsdb.path=/prometheus'
  #   networks:
  #     - OpenTalent-network

  # grafana:
  #   image: grafana/grafana:latest
  #   container_name: OpenTalent-grafana
  #   restart: unless-stopped
  #   ports:
  #     - "${GRAFANA_PORT:-3001}:3000"
  #   environment:
  #     - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}
  #     - GF_INSTALL_PLUGINS=redis-datasource
  #   volumes:
  #     - grafana-data:/var/lib/grafana
  #     - ./monitoring/grafana/dashboards:/etc/grafana/provisioning/dashboards:ro
  #   depends_on:
  #     - prometheus
  #   networks:
  #     - OpenTalent-network

#=============================================================================
# VOLUMES
#=============================================================================

volumes:
  postgres-data:
    driver: local
  redis-data:
    driver: local
  minio-data:
    driver: local
  ollama-models:
    driver: local
  avatar-cache:
    driver: local
  piper-models:
    driver: local
  whisper-models:
    driver: local
  frontend-build:
    driver: local
  ai-orchestra-assets:
    driver: local
  # prometheus-data:
  #   driver: local
  # grafana-data:
  #   driver: local

#=============================================================================
# NETWORKS
#=============================================================================

networks:
  OpenTalent-network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.28.0.0/16
