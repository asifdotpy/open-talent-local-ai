# WebRTC Integration Test Configuration
# Defines test scenarios, parameters, and validation thresholds

[test_globals]
# Global test settings
test_timeout_seconds = 120
service_startup_timeout_seconds = 30
audio_sample_rate = 48000
audio_channels = 1

[connection_test]
# Basic WebRTC connection establishment test
enabled = true
description = "Test basic WebRTC connection establishment and negotiation"
session_timeout_seconds = 30
expected_connection_time_max_ms = 5000

[audio_quality_test]
# Audio processing quality validation
enabled = true
description = "Validate audio processing pipeline quality metrics"
test_audio_duration_seconds = 5.0
test_audio_frequency_hz = 1000
include_noise = true
include_speech_simulation = true

# Quality thresholds
min_snr_db = 15.0
max_thd_percent = 5.0
max_latency_ms = 100.0
min_rnnoise_effectiveness = 0.3

[stress_test]
# Connection stress testing
enabled = true
description = "Test multiple simultaneous WebRTC connections"
num_simultaneous_connections = 3
connection_spacing_seconds = 0.5
per_connection_timeout_seconds = 15

[latency_test]
# Latency measurement and validation
enabled = true
description = "Measure and validate WebRTC connection latency"
max_acceptable_latency_ms = 5000
warning_latency_ms = 2000

[performance_metrics]
# Performance validation thresholds
min_frames_per_second = 30
max_frame_drop_rate_percent = 5.0
max_cpu_usage_percent = 80.0
max_memory_usage_mb = 512

[network_conditions]
# Network simulation settings (for future implementation)
packet_loss_percent = 0
latency_ms = 0
bandwidth_kbps = 0

[audio_validation]
# Detailed audio validation settings
fft_size = 2048
overlap_percent = 50
frequency_bins = 1024

# SNR calculation settings
snr_window_size_seconds = 0.1
snr_overlap_percent = 75

# THD calculation settings
fundamental_frequency_hz = 1000
harmonic_count = 5

[webrtc_settings]
# WebRTC-specific test settings
ice_gathering_timeout_seconds = 5
dtls_handshake_timeout_seconds = 10
sctp_connection_timeout_seconds = 5

# Data channel settings
datachannel_label = "audio_control"
datachannel_max_retransmits = 3

[logging]
# Test logging configuration
log_level = "INFO"
save_audio_samples = true
save_test_artifacts = true
artifact_retention_days = 7

[reporting]
# Test reporting settings
generate_detailed_report = true
include_audio_waveforms = false
include_spectral_analysis = true
export_format = "json"  # json, xml, html